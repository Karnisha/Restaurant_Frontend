{"ast":null,"code":"var _jsxFileName = \"D:\\\\Micro\\\\Restaurant_Booking_React\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport React from 'react';\nimport { NavLink, useNavigate, Link } from 'react-router-dom';\nimport Layout from '../components/Layout/Layout';\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialValues = {\n  Email: \"\",\n  Password: \"\"\n};\nfunction Login() {\n  _s();\n  const [formValues, setFormValues] = useState(initialValues);\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmit, setIsSubmit] = useState(false);\n  const navigate = useNavigate();\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues({\n      ...formValues,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const errors = validate(formValues);\n    setFormErrors(errors);\n    setIsSubmit(true);\n    if (Object.keys(errors).length === 0) {\n      try {\n        const response = await axios.post('https://localhost:7092/api/Login/login', formValues);\n        console.log('Login Successfully:', response.data);\n        window.alert('Login successful');\n        Cookies.set('Email', formValues.Email, {\n          expires: 7\n        });\n        // Redirect based on user role\n        const name = formValues.Email.substring(0, formValues.Email.indexOf('@'));\n        if (formValues.Email === 'admin@admin.com' && formValues.Password === '12345') {\n          navigate(\"/adminhome\");\n        } else {\n          navigate(\"/home\", {\n            state: {\n              username: name,\n              email: formValues.Email\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error:', error);\n        window.alert('Login failed');\n      }\n    }\n  };\n  useEffect(() => {\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\n      console.log(formValues);\n    }\n  }, [formErrors]);\n  const validate = values => {\n    const errors = {};\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/; // Simple email regex for demonstration\n\n    if (!values.Email) {\n      errors.Email = \"Email is required!\";\n    } else if (!regex.test(values.Email)) {\n      errors.Email = \"This is not a valid email format!\";\n    }\n    if (!values.Password) {\n      errors.Password = \"Password is required!\";\n    } else if (values.Password.length < 4) {\n      errors.Password = \"Password must be more than 4 characters\";\n    } else if (values.Password.length > 10) {\n      errors.Password = \"Password must not exceed more than 10 characters\";\n    }\n    return errors;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"container p-5 w-25 border border-dark bg-dark rounded\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center'\n          },\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating \",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            class: \"form-control\",\n            id: \"email\",\n            name: \"Email\",\n            value: formValues.Email,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email \",\n            className: formValues.Email ? \"active\" : \"\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: true,\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 80\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: formErrors.Email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-floating \",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            class: \"form-control\",\n            id: \"pwd\",\n            name: \"Password\",\n            value: formValues.Password,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"pwd\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: formErrors.Password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn btn-primary\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/signup\",\n            style: {\n              display: 'flex',\n              justifyContent: 'flex-end'\n            },\n            children: \"Don't Have an account? Signup!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n_s(Login, \"6ubXX1cwWlgJT9WRkmlZO+/q6bc=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useEffect","axios","React","NavLink","useNavigate","Link","Layout","Cookies","initialValues","Email","Password","Login","formValues","setFormValues","formErrors","setFormErrors","isSubmit","setIsSubmit","navigate","handleChange","e","name","value","target","handleSubmit","preventDefault","errors","validate","Object","keys","length","response","post","console","log","data","window","alert","set","expires","substring","indexOf","state","username","email","error","values","regex","test","display","justifyContent"],"sources":["D:/Micro/Restaurant_Booking_React/src/pages/Login.js"],"sourcesContent":["import { useState,useEffect } from 'react'\r\nimport axios from 'axios';\r\nimport React from 'react'\r\nimport { NavLink,useNavigate ,Link} from 'react-router-dom'\r\nimport Layout from '../components/Layout/Layout';\r\nimport Cookies from 'js-cookie';\r\n  const initialValues = { Email: \"\", Password: \"\" };\r\nfunction Login() {\r\n  const [formValues, setFormValues] = useState(initialValues);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormValues({ ...formValues, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const errors = validate(formValues);\r\n    setFormErrors(errors);\r\n    setIsSubmit(true);\r\n\r\n    if (Object.keys(errors).length === 0) {\r\n      try {\r\n        const response = await axios.post('https://localhost:7092/api/Login/login', formValues);\r\n        console.log('Login Successfully:', response.data);\r\n        window.alert('Login successful');\r\n        Cookies.set('Email', formValues.Email, { expires: 7 });\r\n        // Redirect based on user role\r\n        const name = formValues.Email.substring(0, formValues.Email.indexOf('@'));\r\n        if (formValues.Email === 'admin@admin.com' && formValues.Password === '12345') {\r\n          navigate(\"/adminhome\");\r\n        } else {\r\n          navigate(\"/home\", { state: { username: name, email: formValues.Email } });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        window.alert('Login failed');\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\r\n      console.log(formValues);\r\n    }\r\n  }, [formErrors]);\r\n\r\n  const validate = (values) => {\r\n    const errors = {};\r\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/; // Simple email regex for demonstration\r\n\r\n    if (!values.Email) {\r\n      errors.Email = \"Email is required!\";\r\n    } else if (!regex.test(values.Email)) {\r\n      errors.Email = \"This is not a valid email format!\";\r\n    }\r\n\r\n    if (!values.Password) {\r\n      errors.Password = \"Password is required!\";\r\n    } else if (values.Password.length < 4) {\r\n      errors.Password = \"Password must be more than 4 characters\";\r\n    } else if (values.Password.length > 10) {\r\n      errors.Password = \"Password must not exceed more than 10 characters\";\r\n    }\r\n\r\n    return errors;\r\n  };\r\n\r\n  return (\r\n    <>\r\n         \r\n               \r\n    <div class='container p-5 w-25 border border-dark bg-dark rounded'>\r\n             \r\n \r\n      <form onSubmit={handleSubmit}>\r\n \r\n        <h1 style={{ display: 'flex', justifyContent: 'center' }}>Login</h1>\r\n        <hr></hr>\r\n        <div className=\"form-floating \">\r\n          <input type=\"email\" class=\"form-control\" id=\"email\" name=\"Email\" value={formValues.Email} onChange={handleChange}/>\r\n          <label htmlFor=\"email \" className={formValues.Email ? \"active\" : \"\"}><p className>Email</p></label>\r\n        </div><p>{formErrors.Email}</p>\r\n \r\n        <div class=\"form-floating \">\r\n          <input type=\"password\" class=\"form-control\" id=\"pwd\" name=\"Password\" value={formValues.Password} onChange={handleChange} />\r\n          <label htmlFor=\"pwd\">Password</label>\r\n        </div><p>{formErrors.Password}</p>\r\n        <div class=\"footer\">\r\n \r\n          <button class=\"btn btn-primary\">Login</button>\r\n          <NavLink to='/signup' style={{ display: 'flex', justifyContent: 'flex-end' }}>Don't Have an account? Signup!</NavLink>\r\n        </div>\r\n      </form>\r\n \r\n    </div>\r\n    </>\r\n  )\r\n}\r\n \r\nexport default Login\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}